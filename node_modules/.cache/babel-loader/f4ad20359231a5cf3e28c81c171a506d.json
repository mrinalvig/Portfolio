{"ast":null,"code":"function DmgBox(creator, life, dmg, _knockback) {\n  if (_knockback == undefined) _knockback = 200;\n  GameObject.call(this);\n  this.knockback = _knockback;\n  this.timer = life;\n  this.creator = creator;\n  this.dmg = dmg;\n  this.canCollide = false;\n} // Inherit from GameObject\n\n\n_c = DmgBox;\nDmgBox.prototype = Object.create(GameObject.prototype);\nDmgBox.prototype.constructor = DmgBox;\n\nDmgBox.prototype.collide = function (obj) {\n  if (obj != null) {\n    if (obj instanceof EntityLiving && obj != this.creator) {\n      obj.damage(this.dmg); //console.log(obj);\n      // Knockback\n\n      var centerCtr = new Vector2(this.creator.position.x + this.creator.size.x / 2, this.creator.position.y + this.creator.size.y / 2);\n      var centerObj = new Vector2(obj.position.x + obj.size.x / 2, obj.position.y + obj.size.y / 2);\n      obj.velocity = centerObj.sub(centerCtr).normalize().mul(this.knockback); //obj.velocity = new Vector2(0, 200);\n    }\n  }\n};\n\nDmgBox.prototype.update = function (deltaTime) {\n  this.timer -= deltaTime;\n\n  if (this.timer <= 0) {\n    // Delete self\n    delObject(this);\n  }\n};\n\nvar _c;\n\n$RefreshReg$(_c, \"DmgBox\");","map":{"version":3,"sources":["/Users/mrinalvig/Documents/Projects/Portfolio/src/DmgBox.js"],"names":["DmgBox","creator","life","dmg","_knockback","undefined","GameObject","call","knockback","timer","canCollide","prototype","Object","create","constructor","collide","obj","EntityLiving","damage","centerCtr","Vector2","position","x","size","y","centerObj","velocity","sub","normalize","mul","update","deltaTime","delObject"],"mappings":"AAAA,SAASA,MAAT,CAAgBC,OAAhB,EAAyBC,IAAzB,EAA+BC,GAA/B,EAAoCC,UAApC,EAAgD;AAC/C,MAAIA,UAAU,IAAIC,SAAlB,EAA6BD,UAAU,GAAG,GAAb;AAE7BE,EAAAA,UAAU,CAACC,IAAX,CAAgB,IAAhB;AACA,OAAKC,SAAL,GAAiBJ,UAAjB;AACG,OAAKK,KAAL,GAAaP,IAAb;AACH,OAAKD,OAAL,GAAeA,OAAf;AACA,OAAKE,GAAL,GAAWA,GAAX;AACG,OAAKO,UAAL,GAAkB,KAAlB;AACH,C,CAED;;;KAXSV,M;AAYTA,MAAM,CAACW,SAAP,GAAmBC,MAAM,CAACC,MAAP,CAAcP,UAAU,CAACK,SAAzB,CAAnB;AACAX,MAAM,CAACW,SAAP,CAAiBG,WAAjB,GAA+Bd,MAA/B;;AAEAA,MAAM,CAACW,SAAP,CAAiBI,OAAjB,GAA2B,UAASC,GAAT,EAAc;AACxC,MAAIA,GAAG,IAAI,IAAX,EAAiB;AAChB,QAAIA,GAAG,YAAYC,YAAf,IAA+BD,GAAG,IAAI,KAAKf,OAA/C,EAAwD;AACvDe,MAAAA,GAAG,CAACE,MAAJ,CAAW,KAAKf,GAAhB,EADuD,CAGtD;AACD;;AACA,UAAIgB,SAAS,GAAG,IAAIC,OAAJ,CAAY,KAAKnB,OAAL,CAAaoB,QAAb,CAAsBC,CAAtB,GAA0B,KAAKrB,OAAL,CAAasB,IAAb,CAAkBD,CAAlB,GAAsB,CAA5D,EAA+D,KAAKrB,OAAL,CAAaoB,QAAb,CAAsBG,CAAtB,GAA0B,KAAKvB,OAAL,CAAasB,IAAb,CAAkBC,CAAlB,GAAsB,CAA/G,CAAhB;AACA,UAAIC,SAAS,GAAG,IAAIL,OAAJ,CAAYJ,GAAG,CAACK,QAAJ,CAAaC,CAAb,GAAiBN,GAAG,CAACO,IAAJ,CAASD,CAAT,GAAa,CAA1C,EAA6CN,GAAG,CAACK,QAAJ,CAAaG,CAAb,GAAiBR,GAAG,CAACO,IAAJ,CAASC,CAAT,GAAa,CAA3E,CAAhB;AACAR,MAAAA,GAAG,CAACU,QAAJ,GAAeD,SAAS,CAACE,GAAV,CAAcR,SAAd,EAAyBS,SAAzB,GAAqCC,GAArC,CAAyC,KAAKrB,SAA9C,CAAf,CAPuD,CAQvD;AACA;AACD;AACD,CAbD;;AAeAR,MAAM,CAACW,SAAP,CAAiBmB,MAAjB,GAA0B,UAASC,SAAT,EAAoB;AAC7C,OAAKtB,KAAL,IAAcsB,SAAd;;AACA,MAAI,KAAKtB,KAAL,IAAc,CAAlB,EAAqB;AACpB;AACAuB,IAAAA,SAAS,CAAC,IAAD,CAAT;AACA;AACD,CAND","sourcesContent":["function DmgBox(creator, life, dmg, _knockback) {\n\tif (_knockback == undefined) _knockback = 200;\n\t\n\tGameObject.call(this);\n\tthis.knockback = _knockback\n    this.timer = life;\n\tthis.creator = creator;\n\tthis.dmg = dmg;\n    this.canCollide = false;\n}\n\n// Inherit from GameObject\nDmgBox.prototype = Object.create(GameObject.prototype);\nDmgBox.prototype.constructor = DmgBox;\n\nDmgBox.prototype.collide = function(obj) {\n\tif (obj != null) {\n\t\tif (obj instanceof EntityLiving && obj != this.creator) {\n\t\t\tobj.damage(this.dmg);\n\n\t\t\t\t//console.log(obj);\n\t\t\t// Knockback\n\t\t\tvar centerCtr = new Vector2(this.creator.position.x + this.creator.size.x / 2, this.creator.position.y + this.creator.size.y / 2);\n\t\t\tvar centerObj = new Vector2(obj.position.x + obj.size.x / 2, obj.position.y + obj.size.y / 2);\n\t\t\tobj.velocity = centerObj.sub(centerCtr).normalize().mul(this.knockback);\n\t\t\t//obj.velocity = new Vector2(0, 200);\n\t\t}\n\t}\n}\n\nDmgBox.prototype.update = function(deltaTime) {\n\tthis.timer -= deltaTime;\n\tif (this.timer <= 0) {\n\t\t// Delete self\n\t\tdelObject(this);\n\t}\n}\n"]},"metadata":{},"sourceType":"module"}